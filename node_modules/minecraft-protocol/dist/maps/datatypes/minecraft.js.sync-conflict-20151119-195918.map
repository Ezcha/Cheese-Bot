{"version":3,"sources":["datatypes/minecraft.js"],"names":[],"mappings":"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","file":"datatypes/minecraft.js","sourcesContent":["var nbt = require('prismarine-nbt');\nvar types=require(\"protodef\").types;\nvar uuid = require('node-uuid');\n\n// TODO : remove type-specific, replace with generic containers and arrays.\nmodule.exports = {\n  'UUID': [readUUID, writeUUID, 16],\n  'slot': [readSlot, writeSlot, sizeOfSlot],\n  'nbt': [readNbt, types.buffer[1], types.buffer[2]],\n  'restBuffer': [readRestBuffer, writeRestBuffer, sizeOfRestBuffer],\n  'entityMetadataLoop': [readEntityMetadata, writeEntityMetadata, sizeOfEntityMetadata]\n};\n\nfunction readUUID(buffer, offset) {\n  return {\n    value: uuid.unparse(buffer, offset),\n    size: 16,\n  };\n}\n\nfunction writeUUID(value, buffer, offset) {\n  uuid.parse(value, buffer, offset);\n  return offset + 16;\n}\n\nfunction readSlot(buffer, offset) {\n  var value = {};\n  var results = types.short[0](buffer, offset);\n  if(!results) return null;\n  value.blockId = results.value;\n\n  if(value.blockId === -1) {\n    return {\n      value: value,\n      size: 2,\n    };\n  }\n\n  var cursorEnd = offset + 6;\n  if(cursorEnd > buffer.length) return null;\n  value.itemCount = buffer.readInt8(offset + 2);\n  value.itemDamage = buffer.readInt16BE(offset + 3);\n  var nbtData = buffer.readInt8(offset + 5);\n  if(nbtData == 0) {\n    return {\n      value: value,\n      size: 6\n    }\n  }\n  var nbtData = readNbt(buffer, offset + 5);\n  value.nbtData = nbtData.value;\n  return {\n    value: value,\n    size: nbtData.size + 5\n  };\n}\n\nfunction writeSlot(value, buffer, offset) {\n  buffer.writeInt16BE(value.blockId, offset);\n  if(value.blockId === -1) return offset + 2;\n  buffer.writeInt8(value.itemCount, offset + 2);\n  buffer.writeInt16BE(value.itemDamage, offset + 3);\n  var nbtDataLen;\n  if(value.nbtData) {\n    var newbuf = nbt.writeUncompressed(value.nbtData);\n    newbuf.copy(buffer, offset + 5);\n    nbtDataLen = newbuf.length;\n  }\n  else {\n    buffer.writeInt8(0, offset + 5);\n    nbtDataLen = 1;\n  }\n  return offset + 5 + nbtDataLen;\n}\n\nfunction sizeOfSlot(value) {\n  if(value.blockId === -1)\n    return (2);\n  else if(!value.nbtData) {\n    return (6);\n  } else {\n    return (5 + sizeOfNbt(value.nbtData));\n  }\n}\n\n\nfunction readNbt(buffer, offset) {\n  buffer = buffer.slice(offset);\n  return nbt.parseUncompressed(buffer);\n}\n\nfunction writeNbt(value, buffer, offset) {\n  var newbuf = nbt.writeUncompressed(value);\n  newbuf.copy(buffer, offset);\n  return offset + newbuf.length;\n}\n\nfunction sizeOfNbt(value) {\n  return nbt.writeUncompressed(value).length;\n}\n\n\nfunction readRestBuffer(buffer, offset) {\n  return {\n    value: buffer.slice(offset),\n    size: buffer.length - offset\n  };\n}\n\nfunction writeRestBuffer(value, buffer, offset) {\n  value.copy(buffer, offset);\n  return offset + value.length;\n}\n\nfunction sizeOfRestBuffer(value) {\n  return value.length;\n}\n\nfunction readEntityMetadata(buffer, offset, typeArgs, context) {\n  var cursor = offset;\n  var metadata = [];\n  var item, key, type, results, reader, typeName, dataType;\n  while(true) {\n    item = buffer.readUInt8(cursor);\n    if(item === typeArgs.endVal) {\n      return {\n        value: metadata,\n        size: cursor + 1 - offset,\n      };\n    }\n    var results = this.read(buffer, cursor, typeArgs.type, {});\n    metadata.push(results.value);\n    cursor += results.size;\n  }\n}\n\nfunction writeEntityMetadata(value, buffer, offset, typeArgs, context) {\n  var self = this;\n  value.forEach(function(item) {\n    offset = self.write(item, buffer, offset, typeArgs.type, {});\n  });\n  buffer.writeUInt8(typeArgs.endVal, offset);\n  return offset + 1;\n}\n\nfunction sizeOfEntityMetadata(value, typeArgs, context) {\n  var size = 1;\n  for(var i = 0; i < value.length; ++i) {\n    size += this.sizeOf(value[i], typeArgs.type, {});\n  }\n  return size;\n}\n"],"sourceRoot":"/source/"}